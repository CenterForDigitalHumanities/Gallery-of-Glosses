(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{6304:function(e,s,n){Promise.resolve().then(n.bind(n,7684))},7684:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return _slug_Witness}});var t=n(7437),a=n(4033),c=n(1159),o=n(3180),i=n(2265),r=n(4209);let useWitnessGlossesList=e=>{let[s,n]=(0,i.useState)([]),[t,a]=(0,i.useState)(!0);async function fetchFragmentAndProcessProperties(e){let s=await (0,r.wv)(e),n=await s.json(),t=n.map(e=>e.body);return(0,r.TV)(t,e)}async function fetchGlossesAndProcessProperties(e){if(e.references)for(let s of e.references){let e=await (0,r.wv)(s),t=await e.json(),a=t.map(e=>e.body),c=(0,r.zi)(a,s);n(e=>[...e,c])}}async function fetchWitnessFragmentsAndGlosses(){if(!e)return;let s=await (0,r.Mg)(e);if(s&&s.length>1)for(let e of s){let s=e["@id"],n=await fetchFragmentAndProcessProperties(s);fetchGlossesAndProcessProperties(n)}a(!1)}return(0,i.useEffect)(()=>{fetchWitnessFragmentsAndGlosses()},[e]),{glosses:s,loading:t}},useWitnessInstance=e=>{let[s,n]=(0,i.useState)();async function fetchWitnessAndProcessProperties(){let s=await (0,r.wv)(e),t=await s.json(),a=t.map(e=>e.body);n((0,r.w2)(a,e))}return(0,i.useEffect)(()=>{fetchWitnessAndProcessProperties()},[e]),s},l={header:"Incipit",accessorKey:"title",expandable:!1},d=(0,c.C)([l,{header:"Canonical Reference Locator",accessorKey:"canonicalReference",expandable:!1},{header:"Gloss Text",accessorKey:"textValue",expandable:!0}]);var _slug_Witness=e=>{(0,a.usePathname)();let s=e.slug,n=useWitnessInstance(s),c="filter blur-md opacity-50",{glosses:i,loading:r}=useWitnessGlossesList(null==n?void 0:n.identifier);return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"text-foreground p-4 md:p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4 ".concat(!n&&c),children:n?n.identifier:"Not found"}),(0,t.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 mb-8",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Repository:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.repository:"Not found"})]})," ",(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"City:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.city:"Not found"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Institution:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.institution:"Not found"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Provenance:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.provenance:"Not found"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Region:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.region:"Not found"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Data URL:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.url:"Not found"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Base Project:"})," ",(0,t.jsx)("span",{className:"".concat(!n&&c),children:n?n.baseProject:"Not found"})]})]}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4 ".concat(!n&&c),children:"Attached Glosses"}),(0,t.jsx)(o.w,{columns:d,data:i,loading:r,filterColumn:l})]})})}}},function(e){e.O(0,[310,173,206,702,638,971,472,744],function(){return e(e.s=6304)}),_N_E=e.O()}]);